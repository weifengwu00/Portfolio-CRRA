Stata 11 has a new text markup language called SMCL to show greek letter in the titles of stata graphs. The code "{&rho}" is to show the greek letter rho. Indeed, when I run the program on my computer it does give me the desired greek letter. However, it seems that the stata on the department computer does not contain this update. Therefore, the graphs look differently if you could run it in a more updated stata.

Another comment is that the code may run for a extented amount of time if the number of loops is 1000, around 2 hours. The program runs a few minutes if the number of loop is 100. The current code is for 100. I guess it is not quite desirable to wait 2 hours to grade for this program. The folder contains a 1000.dta file saved from 1000 loops. The h2.tex contains three figures the last of which comes from the 1000 loops.